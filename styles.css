* {
  box-sizing: border-box;
}

body {
  margin: 0;
  font-family: system-ui, sans-serif;
  color: black;
  background-color: white;
}

.bounds {
  height: 300px;
  width: 800px;
  position: absolute;
}
.parent {
  position: absolute;
  inset: 0;
}
table {
  --border-width: 0.5px;
  border-spacing: 0;
  border-collapse: separate; /* This is important!!! */
}
th,
td {
  border: var(--border-width) solid lightblue;
  position: sticky;
  padding: 0;
}
:is(th, td):not(:last-child) {
  width: 100px;
}
:is(th, td):last-child {
  position: relative;
}
:is(th, td):nth-child(1) {
  left: 0;
}
:is(th, td):nth-child(2) {
  left: 100px;
}
:is(th, td):nth-child(3) {
  left: 200px;
}

.label2 {
  /* position: sticky;
  left: 302px; */
  /* position: absolute; */
  /* left: calc((var(--timeline-width) / var(--scroll-x) / 100%) +1px); */
  /* left: var(--scroll-x); */
  /* position: sticky;
  left: calc(var(--timeline-offset) + var(--border-width)); */
}
.label,
.bar {
  position: relative;

  /* IMPORTANT: positioned relative to the width of the timeline, rather than width of bar */
  /* left: calc(var(--timeline-width) * var(--bar-left-ratio)); */
  left: var(--offset-left);

  /* max-width: calc(100% - var(--bar-left-percent)); */
  /* max-width: calc(100% - calc(var(--bar-left-ratio) * 100%)); */
}
.bar-wrapper {
  --offset-left: calc(var(--timeline-width) * var(--bar-left-ratio));

  position: sticky;
}
.bar-wrapper:not([start]) {
  --start-color: transparent;
  left: calc(var(--timeline-offset) + var(--border-width));
}
.bar-wrapper:not([end]) {
  --end-color: transparent;
  width: calc(var(--parent-width) - var(--timeline-offset));
  max-width: calc(100% - var(--scroll-x));
}
.bar-wrapper[start]:not([end]) {
  --start-color: purple;

  /* Working for bars with [start] and with or without a left offset. */
  width: calc(
    var(--parent-width) - var(--timeline-offset) + var(--scroll-x) -
      var(--bar-width, 0px) - var(--offset-left, 0px)
  );
  max-width: calc(100% - var(--bar-left-percent, 0%));
}
.bar-wrapper[end]:not([start]) {
  --end-color: lime;
  max-width: calc(100% - var(--scroll-x));
}
.bar-wrapper[start][end] {
  --start-color: blue;
  --end-color: blue;
}

.bar {
  --start-color: red;
  --end-color: red;
  display: block;
  background: linear-gradient(
    to right,
    var(--start-color) 0px,
    red 30px,
    red calc(100% - 30px),
    var(--end-color) 100%
  );
  height: 12px;
  position: relative;
}
.bar:not([start]) {
  --start-color: transparent;
  /* left: calc(var(--timeline-offset) + var(--border-width)); */
}
.bar:not([end]) {
  --end-color: transparent;
  /* width: calc(var(--parent-width) - var(--timeline-offset)); */
  /* max-width: calc(100% - var(--scroll-x)); */
}
.bar[start]:not([end]) {
  --start-color: purple;
  /* width: calc(var(--parent-width) - var(--timeline-offset) + var(--scroll-x)); */
  /* max-width: 100%; */
  /* max-width: calc(100% - var(--bar-left, 0%)); */
}
.bar[end]:not([start]) {
  --end-color: lime;
  /* max-width: calc(100% - var(--scroll-x)); */
}
.bar[start] {
  /* left: var(--bar-left); */
}
.bar[start][end] {
  --start-color: blue;
  --end-color: blue;
}
.timeline-inner {
  display: flex;
}
.timeline-inner > * {
  flex-grow: 1;
}
.timeline-inner > *.visible {
  background: lime;
}
